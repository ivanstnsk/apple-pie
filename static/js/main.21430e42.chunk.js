(this["webpackJsonpapple-pie"]=this["webpackJsonpapple-pie"]||[]).push([[0],{111:function(e,t,n){e.exports=n(126)},116:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(9),l=n.n(o),i=(n(116),n(15)),u=n(46),s=n(19),m=n(88),p=n(28),d=n(67),f=n(89),h=n(90),g=n.n(h),b=n(23);!function(e){e.SetToken="Auth/SetToken",e.RemoveToken="Auth/RemoveToken"}(a||(a={}));var v,E={token:""};!function(e){e.SetName="User/SetName",e.SetMonth="User/SetMonth"}(v||(v={}));var w,y=function(e){return{type:v.SetMonth,payload:e}},k={name:"",month:0};!function(e){e.SetStatement="Statement/SetStatement"}(w||(w={}));var x=function(e){return{type:w.SetStatement,payload:e}},O={items:[]},j={key:"auth",storage:g.a},S=Object(p.combineReducers)({auth:Object(d.a)(j,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case a.SetToken:return Object(b.a)({},e,{token:r});case a.RemoveToken:return Object(b.a)({},e,{token:null});default:return e}})),user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case v.SetName:return Object(b.a)({},e,{name:a});case v.SetMonth:return Object(b.a)({},e,{month:a});default:return e}},statement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case w.SetStatement:return Object(b.a)({},e,{items:a});default:return e}}}),C=Object(p.createStore)(S,{},Object(f.composeWithDevTools)()),N=Object(d.b)(C),T=n(24),D=n(190),B=n(176),I=n(173),R=n(186),W=n(91),M=n.n(W),H=n(69),F=n(171),L=function(){var e=Object(s.b)();return{onSetToken:function(t){t&&t.length>0&&e(function(e){return{type:a.SetToken,payload:e}}(t))}}},G=n(169),P=Object(G.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),J=function(){var e=P(),t=L(),n=r.useState(""),a=Object(T.a)(n,2),c=a[0],o=a[1],l=r.useCallback((function(e){o(e.target.value)}),[o]),i=r.useCallback((function(e){e.preventDefault(),t.onSetToken(c)}),[t,c]);return r.createElement(F.a,{component:"main",maxWidth:"xs"},r.createElement(I.a,null),r.createElement("div",{className:e.paper},r.createElement(D.a,{className:e.avatar},r.createElement(M.a,null)),r.createElement(H.a,{component:"h1",variant:"h5"},"\u041ci\u0439 \u0442\u043e\u043a\u0435\u043d"),r.createElement("form",{className:e.form,noValidate:!0},r.createElement(R.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"token",label:"Token",type:"password",id:"token",autoComplete:"none",value:c,onChange:l}),r.createElement(B.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:i},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0432\u0430\u0442\u0438\u0441\u044f"))))},U=n(5),z=n(189),A=n(180),X=n(94),q=n.n(X),V=n(181),$=n(175),K=n(177),Q=n(178),Y=n(179),Z=n(93),_=n.n(Z),ee=n(92),te=n.n(ee),ne=n(60),ae=Object(G.a)((function(e){return{drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(ne.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),toolbarIcon:Object(b.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},userContainer:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:15,paddingBottom:15},userName:{display:"visible"},userNameHidden:{display:"none"},dateContainer:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:15,paddingBottom:15},date:{display:"visible"},dateHidden:{display:"none"}}})),re=function(e){var t=e.drawerOpen,n=e.userName,a=e.onDrawerToggleClick,c=ae(),o=i.g(),l={paper:Object(U.a)(c.drawerPaper,!t&&c.drawerPaperClose)},u=Object(U.a)(c.userName,!t&&c.userNameHidden),s=Object(U.a)(c.date,!t&&c.dateHidden),m=r.useCallback((function(e){return function(){o.push(e)}}),[o]);return r.createElement(z.a,{variant:"permanent",classes:l,open:t},r.createElement("div",{className:c.toolbarIcon},r.createElement(A.a,{onClick:a},r.createElement(q.a,null))),r.createElement(V.a,null),r.createElement("div",{className:c.userContainer},r.createElement(D.a,null,n.split(" ").reduce((function(e,t){return e+t.substring(0,1).toUpperCase()}),"")),r.createElement("div",{className:u},r.createElement(H.a,{variant:"h6"},n))),r.createElement(V.a,null),r.createElement("div",{className:c.dateContainer},r.createElement("div",{className:s},r.createElement(H.a,{variant:"body2"},"\u041b\u0438\u043f\u0435\u043d\u044c 2020"))),r.createElement(V.a,null),r.createElement($.a,null,function(e){return r.createElement(r.Fragment,null,r.createElement(K.a,{button:!0,onClick:e("/planning")},r.createElement(Q.a,null,r.createElement(te.a,null)),r.createElement(Y.a,{primary:"\u041f\u043b\u0430\u043d\u0443\u0432\u0430\u043d\u043d\u044f"})),r.createElement(K.a,{button:!0,onClick:e("/dashboard")},r.createElement(Q.a,null,r.createElement(_.a,null)),r.createElement(Y.a,{primary:"\u0414\u0430\u0448\u0431\u043e\u0440\u0434"})))}(m)))},ce=n(182),oe=n(183),le=n(95),ie=n.n(le),ue=n(96),se=n.n(ue),me=Object(G.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},toolbar:{paddingRight:24}}})),pe=function(e){var t=e.drawerOpen,n=e.onDrawerToggleClick,a=e.onLogout,c=me(),o=Object(U.a)(c.appBar,t&&c.appBarShift),l=Object(U.a)(c.menuButton,t&&c.menuButtonHidden);return r.createElement(ce.a,{position:"absolute",className:o},r.createElement(oe.a,{className:c.toolbar},r.createElement(A.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:n,className:l},r.createElement(ie.a,null)),r.createElement(H.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:c.title},"Page"),r.createElement(A.a,{color:"inherit",onClick:a},r.createElement(se.a,null))))},de=n(97),fe=n.n(de),he=n(188),ge=n(127),be={0:"\u0421\u0456\u0447\u0435\u043d\u044c",1:"\u041b\u044e\u0442\u0438\u0439",2:"\u0411\u0435\u0440\u0435\u0437\u0435\u043d\u044c",3:"\u041a\u0432\u0456\u0442\u0435\u043d\u044c",4:"\u0422\u0440\u0430\u0432\u0435\u043d\u044c",5:"\u0427\u0435\u0440\u0432\u0435\u043d\u044c",6:"\u041b\u0438\u043f\u0435\u043d\u044c",7:"\u0421\u0435\u0440\u043f\u0435\u043d\u044c",8:"\u0412\u0435\u0440\u0435\u0441\u0435\u043d\u044c",9:"\u0416\u043e\u0432\u0442\u0435\u043d\u044c",10:"\u041b\u0438\u0441\u0442\u043e\u043f\u0430\u0434",11:"\u0413\u0440\u0443\u0434\u0435\u043d\u044c"},ve=Object(G.a)((function(e){return{container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},modal:{maxWidth:500,width:"100%",height:500,position:"absolute",left:"50%",top:"50%",transform:"translate(-150px, -250px)",outline:"none"},modalInner:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",flexWrap:"wrap",height:"100%"},button:{marginLeft:10,marginRight:10}}})),Ee=function(){var e=ve(),t=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.user}));return{month:t.month,monthLabel:be[t.month],onSetMonth:function(t){e(y(t))}}}(),n=r.useState(!1),a=Object(T.a)(n,2),c=a[0],o=a[1],l=r.useCallback((function(e){return function(){o(e)}}),[o]),i=r.useCallback((function(e){return function(){t.onSetMonth(e)}}),[t]);return r.createElement(r.Fragment,null,r.createElement("div",{className:e.container},r.createElement(H.a,{variant:"h4"},t.monthLabel," 2020"),r.createElement(A.a,{"aria-label":"delete",onClick:l(!0)},r.createElement(fe.a,null))),r.createElement(he.a,{open:c,onClose:l(!1),"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.createElement("div",{className:e.modal},r.createElement(ge.a,{className:e.modalInner},Object.entries(be).map((function(t){var n=Object(T.a)(t,2),a=n[0],c=n[1],o=i(parseInt(a));return function(e,t,n){return r.createElement(B.a,{variant:"outlined",color:"primary",className:e.button,onClick:n},t)}(e,c,o)}))))))},we=n(184),ye=n(187),ke=n(185),xe=n(36),Oe=n(12),je=Object(G.a)((function(e){return{paper:{width:"100%"}}})),Se=function(e){var t=e.chartData,n=je(),a=r.useState("income"),c=Object(T.a)(a,2),o=c[0],l=c[1],i=r.useCallback((function(e,t){l(t)}),[l]);return r.createElement(we.a,{container:!0,spacing:3},r.createElement(we.a,{item:!0,xs:12,md:8,lg:9},r.createElement(ge.a,{className:n.paper},r.createElement(ye.a,{value:o,onChange:i,"aria-label":"simple tabs example"},r.createElement(ke.a,{label:"\u0414\u043e\u0445\u043e\u0434\u0438",value:"income"}),r.createElement(ke.a,{label:"\u0412\u0438\u0442\u0440\u0430\u0442\u0438",value:"expenses"})),"income"===o&&r.createElement(xe.c,{data:t},r.createElement(xe.a,null),r.createElement(xe.d,null),r.createElement(xe.b,{name:"plus",valueField:"plus",argumentField:"day",color:"#00b300"}),r.createElement(Oe.e,null),r.createElement(Oe.f,null)),"expenses"===o&&r.createElement(xe.c,{data:t},r.createElement(xe.a,null),r.createElement(xe.d,null),r.createElement(xe.b,{name:"minus",valueField:"minus",argumentField:"day",color:"#ff4d4d"}),r.createElement(Oe.e,null),r.createElement(Oe.f,null)))),r.createElement(we.a,{item:!0,xs:12,md:4,lg:3},r.createElement(ge.a,null,"TODO: statistic for day")))},Ce=Object(G.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"}}})),Ne=function(){var e=Ce(),t=function(){for(var e=Object(s.c)((function(e){return e.statement})),t=Object(s.c)((function(e){return e.user})),n=new Map,a=new Date(2020,t.month,0).getDate(),r=0;r<a;r+=1){var c="".concat(r);n.set(c,{day:c,minus:0,plus:0})}e.items.forEach((function(e){var t=e.time,a=e.amount,r=(e.balance,a/100),c={day:"".concat(new Date(1e3*t).getDate()),minus:r<0?r:0,plus:r>0?r:0},o=n.get(c.day);c.minus+=o?o.minus:0,c.plus+=o?o.plus:0,n.set(c.day,c)}));var o=[];return n.forEach((function(e){o.push(Object(b.a)({},e,{minus:-1*e.minus}))})),{statementGroupedByDay:o}}();return r.createElement("div",{className:e.paper},r.createElement(Se,{chartData:t.statementGroupedByDay}))},Te=n(31),De=n.n(Te),Be=n(45),Ie=function(e){return function(e,t){var n=localStorage.getItem("persist:auth"),a=new Headers,r="https://api.monobank.ua/".concat(t);if(n){var c=JSON.parse(n).token;c&&a.append("X-Token",c.substring(1,c.length-1))}return fetch(r,{method:e,headers:a})}("get",e)},Re=function(){var e=Object(Be.a)(De.a.mark((function e(){var t,n,a;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie("personal/client-info");case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,a=n.name,e.abrupt("return",a);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),We=function(){var e=Object(Be.a)(De.a.mark((function e(t){var n,a,r,c,o;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date("2020.".concat(t,".01")).getTime()/1e3,a=new Date("2020.".concat(t,".").concat(new Date(2020,t,0).getDate())).getTime()/1e3,e.prev=2,e.next=5,Ie("personal/statement/0/".concat(n,"/").concat(a));case 5:return r=e.sent,e.next=8,r.json();case 8:if(!((c=e.sent)&&c.length>0)){e.next=12;break}return o=c,e.abrupt("return",o);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0);case 17:return e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.user})),n=r.useCallback(Object(Be.a)(De.a.mark((function t(){var n;return De.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Re();case 2:(n=t.sent)&&e((a=n,{type:v.SetName,payload:a}));case 4:case"end":return t.stop()}var a}),t)}))),[e]),c=r.useCallback(function(){var t=Object(Be.a)(De.a.mark((function t(n){var a;return De.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,We(n);case 2:a=t.sent,e(x(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),o=r.useCallback((function(){var t=(new Date).getMonth();e(y(t))}),[e]);return r.useEffect((function(){n(),o()}),[n,o]),r.useEffect((function(){c(t.month)}),[c,t.month]),{userName:t.name,onRemoveToken:function(){e({type:a.RemoveToken})}}},He=Object(G.a)((function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}})),Fe=function(){var e=He(),t=Me(),n=r.useState(!0),a=Object(T.a)(n,2),c=a[0],o=a[1],l=r.useCallback((function(){console.log(c,!c),o(!c)}),[c,o]),u=r.useCallback((function(){t.onRemoveToken()}),[t]);return r.createElement("div",{className:e.root},r.createElement(I.a,null),r.createElement(pe,{drawerOpen:c,onDrawerToggleClick:l,onLogout:u}),r.createElement(re,{drawerOpen:c,userName:t.userName,onDrawerToggleClick:l}),r.createElement("main",{className:e.content},r.createElement("div",{className:e.appBarSpacer}),r.createElement(F.a,{maxWidth:"lg",className:e.container},r.createElement(Ee,null),r.createElement(i.b,{path:"/dashboard"},r.createElement(Ne,null)))))},Le=n(68),Ge=function(){return!!Object(s.c)((function(e){return e.auth})).token},Pe=function(e){var t=e.children,n=Object(Le.a)(e,["children"]),a=Ge();return r.createElement(i.b,Object.assign({},n,{render:function(e){var n=e.location;return a?t:r.createElement(i.a,{to:{pathname:"/login",state:{from:n}}})}}))},Je=function(e){var t=e.children,n=Object(Le.a)(e,["children"]),a=Ge();return r.createElement(i.b,Object.assign({},n,{render:function(e){var n=e.location;return a?r.createElement(i.a,{to:{pathname:"/",state:{from:n}}}):t}}))},Ue=function(){return r.createElement(i.d,null,r.createElement(Je,{path:"/login"},r.createElement(J,null)),r.createElement(Pe,{path:"/"},r.createElement(Fe,null)))},ze=function(){return r.createElement(s.a,{store:C},r.createElement(m.a,{persistor:N},r.createElement(u.a,{basename:"/monoplan-poc"},r.createElement(Ue,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[111,1,2]]]);
//# sourceMappingURL=main.21430e42.chunk.js.map