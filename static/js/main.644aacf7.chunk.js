(this["webpackJsonpapple-pie"]=this["webpackJsonpapple-pie"]||[]).push([[0],{384:function(e,t,n){e.exports=n(456)},389:function(e,t,n){},456:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(17),l=n.n(o),i=(n(389),n(129)),s=n(485),u=n(34),m=n(81),d=n(25),p=n(359),f=n(46),g=n(144),b=n(360),h=n(231),E=n.n(h),v=n(29);!function(e){e.SetToken="Auth/SetToken",e.RemoveToken="Auth/RemoveToken"}(a||(a={}));var y,O={token:""};!function(e){e.SetName="User/SetName",e.SetMonth="User/SetMonth"}(y||(y={}));var j,w={name:"",month:0};!function(e){e.SetStatement="Statement/SetStatement"}(j||(j={}));var C,x={items:[]},k=n(63);!function(e){e.CreateYear="Planning/CreateYear",e.RemoveYear="Planning/RemoveYear",e.CreateMonth="Planning/CreateMonth",e.RemoveMonth="Planning/RemoveMonth"}(C||(C={}));var R,N={plans:{}};!function(e){e.AddCategory="Categories/AddCategory",e.UpdateCategory="Categories/UpdateCategory",e.DeleteCategory="Categories/DeleteCategory"}(R||(R={}));var D={income:{},expenses:{}},S={key:"auth",storage:E.a},T={key:"planning",storage:E.a},I={key:"categories",storage:E.a},M=Object(f.combineReducers)({auth:Object(g.a)(S,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case a.SetToken:return Object(v.a)({},e,{token:r});case a.RemoveToken:return Object(v.a)({},e,{token:null});default:return e}})),user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case y.SetName:return Object(v.a)({},e,{name:a});case y.SetMonth:return Object(v.a)({},e,{month:a});default:return e}},statement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case j.SetStatement:return Object(v.a)({},e,{items:a});default:return e}},planning:Object(g.a)(T,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case C.CreateYear:var r=a;if(e.plans[r])return e;var c={year:r,months:{}};return Object(v.a)({},e,{plans:Object(v.a)({},e.plans,Object(k.a)({},r,c))});case C.RemoveYear:var o=a;if(!e.plans[o])return e;var l=e.plans;return delete l[o],Object(v.a)({},e,{plans:l});case C.CreateMonth:var i=a,s=i.year,u=i.month;if(!e.plans[s])return e;if(u<0||u>11)return e;var m={month:u,income:[],expenses:[]};return Object(v.a)({},e,{plans:Object(v.a)({},e.plans,Object(k.a)({},s,{year:s,months:Object(v.a)({},e.plans[s].months,Object(k.a)({},u,m))}))});case C.RemoveMonth:var d=a,p=d.year,f=d.month;if(!e.plans[p])return e;if(f<0||f>11)return e;var g=e.plans[p].months;return delete g[f],Object(v.a)({},e,{plans:Object(v.a)({},e.plans,Object(k.a)({},p,{year:p,months:g}))});default:return e}})),categories:Object(g.a)(I,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case R.AddCategory:var r=a;return e[r.type][r.id]?e:Object(v.a)({},e,Object(k.a)({},r.type,Object(v.a)({},e[r.type],Object(k.a)({},r.id,r))));case R.UpdateCategory:var c=a;return e[c.type][c.id]?Object(v.a)({},e,Object(k.a)({},c.type,Object(v.a)({},e[c.type],Object(k.a)({},c.id,c)))):e;case R.DeleteCategory:var o=a,l=o.id,i=o.type;if(!e[i][l])return e;var s=e[i];return delete s[l],Object(v.a)({},e,Object(k.a)({},i,s));default:return e}}))}),B=Object(f.createStore)(M,{},Object(b.composeWithDevTools)()),A=Object(g.b)(B),P=n(77),W=n(493),Y=n(324),F=n(475),U=n(323),H=n(361),L=n.n(H),G=n(86),z=n(474),J=function(){var e=Object(d.c)();return{onSetToken:function(t){t&&t.length>0&&e(function(e){return{type:a.SetToken,payload:e}}(t))}}},q=n(322),V=Object(q.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),X=function(){var e=V(),t=J(),n=r.useState(""),a=Object(P.a)(n,2),c=a[0],o=a[1],l=r.useCallback((function(e){o(e.target.value)}),[o]),i=r.useCallback((function(e){e.preventDefault(),t.onSetToken(c)}),[t,c]);return r.createElement(z.a,{component:"main",maxWidth:"xs"},r.createElement(F.a,null),r.createElement("div",{className:e.paper},r.createElement(W.a,{className:e.avatar},r.createElement(L.a,null)),r.createElement(G.a,{component:"h1",variant:"h5"},"Mono \u0442\u043e\u043a\u0435\u043d"),r.createElement("form",{className:e.form,noValidate:!0},r.createElement(U.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"token",label:"Token",type:"password",id:"token",autoComplete:"none",value:c,onChange:l}),r.createElement(Y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:i},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0432\u0430\u0442\u0438\u0441\u044f"))))},$=n(2),K=n(79),Q=n(265),Z=n(366),_=n.n(Z),ee=n(478),te=n(374),ne=n(375),ae=n(477),re=n(264),ce=n(365),oe=n.n(ce),le=n(363),ie=n.n(le),se=n(364),ue=n.n(se),me=Object(q.a)((function(e){return{drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(k.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),toolbarIcon:Object(v.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},userContainer:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:15,paddingBottom:15},userName:{display:"visible"},userNameHidden:{display:"none"},dateContainer:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:15,paddingBottom:15},date:{display:"visible"},dateHidden:{display:"none"}}})),de=function(e){var t=e.drawerOpen,n=e.userName,a=e.onDrawerToggleClick,c=me(),o=u.g(),l={paper:Object($.a)(c.drawerPaper,!t&&c.drawerPaperClose)},i=Object($.a)(c.userName,!t&&c.userNameHidden),s=Object($.a)(c.date,!t&&c.dateHidden),m=r.useCallback((function(e){return function(){o.push(e)}}),[o]);return r.createElement(K.a,{variant:"permanent",classes:l,open:t},r.createElement("div",{className:c.toolbarIcon},r.createElement(Q.a,{onClick:a},r.createElement(_.a,null))),r.createElement(ee.a,null),r.createElement("div",{className:c.userContainer},r.createElement(W.a,null,n.split(" ").reduce((function(e,t){return e+t.substring(0,1).toUpperCase()}),"")),r.createElement("div",{className:i},r.createElement(G.a,{variant:"h6"},n))),r.createElement(ee.a,null),r.createElement("div",{className:c.dateContainer},r.createElement("div",{className:s},r.createElement(G.a,{variant:"body2"},"\u041b\u0438\u043f\u0435\u043d\u044c 2020"))),r.createElement(ee.a,null),r.createElement(te.a,null,function(e){return r.createElement(r.Fragment,null,r.createElement(ne.a,{button:!0,onClick:e("/planning")},r.createElement(ae.a,null,r.createElement(ie.a,null)),r.createElement(re.a,{primary:"\u041f\u043b\u0430\u043d\u0443\u0432\u0430\u043d\u043d\u044f"})),r.createElement(ne.a,{button:!0,onClick:e("/categories")},r.createElement(ae.a,null,r.createElement(ue.a,null)),r.createElement(re.a,{primary:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457 \u0434\u043e\u0445\u043e\u0434\u0456\u0432 \u0456 \u0432\u0438\u0442\u0440\u0430\u0442"})),r.createElement(ne.a,{button:!0,onClick:e("/dashboard")},r.createElement(ae.a,null,r.createElement(oe.a,null)),r.createElement(re.a,{primary:"\u0414\u0430\u0448\u0431\u043e\u0440\u0434"})))}(m)))},pe=n(479),fe=n(325),ge=n(367),be=n.n(ge),he=n(368),Ee=n.n(he),ve=Object(q.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},toolbar:{paddingRight:24}}})),ye=function(e){var t=e.drawerOpen,n=e.onDrawerToggleClick,a=e.onLogout,c=ve(),o=function(e){switch(e){case"/planning":return"\u041f\u043b\u0430\u043d\u0443\u0432\u0430\u043d\u043d\u044f";case"/dashboard":return"\u0414\u0430\u0448\u0431\u043e\u0440\u0434";case"/categories":return"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457 \u0434\u043e\u0445\u043e\u0434\u0456\u0432 \u0456 \u0432\u0438\u0442\u0440\u0430\u0442";default:return""}}(Object(u.h)().pathname),l=Object($.a)(c.appBar,t&&c.appBarShift),i=Object($.a)(c.menuButton,t&&c.menuButtonHidden);return r.createElement(pe.a,{position:"absolute",className:l},r.createElement(fe.a,{className:c.toolbar},r.createElement(Q.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:n,className:i},r.createElement(be.a,null)),r.createElement(G.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:c.title},o),r.createElement(Q.a,{color:"inherit",onClick:a},r.createElement(Ee.a,null))))},Oe=(n(369),n(169),n(113)),je=(Object(q.a)((function(e){return{container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},modal:{maxWidth:500,width:"100%",height:500,position:"absolute",left:"50%",top:"50%",transform:"translate(-150px, -250px)",outline:"none"},modalInner:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",flexWrap:"wrap",height:"100%"},button:{marginLeft:10,marginRight:10}}})),n(492)),we=n(480),Ce={0:"\u0421\u0456\u0447\u0435\u043d\u044c",1:"\u041b\u044e\u0442\u0438\u0439",2:"\u0411\u0435\u0440\u0435\u0437\u0435\u043d\u044c",3:"\u041a\u0432\u0456\u0442\u0435\u043d\u044c",4:"\u0422\u0440\u0430\u0432\u0435\u043d\u044c",5:"\u0427\u0435\u0440\u0432\u0435\u043d\u044c",6:"\u041b\u0438\u043f\u0435\u043d\u044c",7:"\u0421\u0435\u0440\u043f\u0435\u043d\u044c",8:"\u0412\u0435\u0440\u0435\u0441\u0435\u043d\u044c",9:"\u0416\u043e\u0432\u0442\u0435\u043d\u044c",10:"\u041b\u0438\u0441\u0442\u043e\u043f\u0430\u0434",11:"\u0413\u0440\u0443\u0434\u0435\u043d\u044c"},xe=function(e){return Ce[e]||"Invalid month"},ke=Object(q.a)((function(e){return{wrapper:{display:"flex",paddingLeft:24,paddingRight:24,marginTop:10}}})),Re=function(e,t){return e.map((function(n,a){var c=e.slice(0,a+1).reduce((function(e,t,n){return e+"".concat(t).concat(n<a?"/":"")}),"");return function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=t;if(t.startsWith("year-"))c=t.substring(5,t.length);else if(t.startsWith("month-")){var o=t.substring(6,t.length);c=xe(o)}return a?r.createElement(G.a,{key:c,color:"textPrimary"},c):r.createElement(we.a,{key:e,color:"inherit",href:e,onClick:n},c)}(c,n,t(c),a===e.length-1)}))},Ne=function(){var e=ke(),t=Object(u.h)(),n=Object(u.g)(),a=t.pathname.split("/"),c=r.useCallback((function(e){return function(){n.push(e)}}),[n]);return r.createElement("div",{className:e.wrapper},r.createElement(je.a,{"aria-label":"breadcrumb"},Re(a,c)))},De=n(481),Se=n(491),Te=n(483),Ie=n(105),Me=n(23),Be=Object(q.a)((function(e){return{paper:{width:"100%"}}})),Ae=function(e){var t=e.chartData,n=Be(),a=r.useState("income"),c=Object(P.a)(a,2),o=c[0],l=c[1],i=r.useCallback((function(e,t){l(t)}),[l]);return r.createElement(De.a,{container:!0,spacing:3},r.createElement(De.a,{item:!0,xs:12,md:8,lg:9},r.createElement(Oe.a,{className:n.paper},r.createElement(Se.a,{value:o,onChange:i,"aria-label":"simple tabs example"},r.createElement(Te.a,{label:"\u0414\u043e\u0445\u043e\u0434\u0438",value:"income"}),r.createElement(Te.a,{label:"\u0412\u0438\u0442\u0440\u0430\u0442\u0438",value:"expenses"})),"income"===o&&r.createElement(Ie.c,{data:t},r.createElement(Ie.a,null),r.createElement(Ie.d,null),r.createElement(Ie.b,{name:"plus",valueField:"plus",argumentField:"day",color:"#00b300"}),r.createElement(Me.e,null),r.createElement(Me.f,null)),"expenses"===o&&r.createElement(Ie.c,{data:t},r.createElement(Ie.a,null),r.createElement(Ie.d,null),r.createElement(Ie.b,{name:"minus",valueField:"minus",argumentField:"day",color:"#ff4d4d"}),r.createElement(Me.e,null),r.createElement(Me.f,null)))),r.createElement(De.a,{item:!0,xs:12,md:4,lg:3},r.createElement(Oe.a,null,"TODO: statistic for day")))},Pe=Object(q.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"}}})),We=function(){var e=Pe(),t=function(){for(var e=Object(d.d)((function(e){return e.statement})),t=Object(d.d)((function(e){return e.user})),n=new Map,a=new Date(2020,t.month,0).getDate(),r=0;r<a;r+=1){var c="".concat(r);n.set(c,{day:c,minus:0,plus:0})}e.items.forEach((function(e){var t=e.time,a=e.amount,r=(e.balance,a/100),c={day:"".concat(new Date(1e3*t).getDate()),minus:r<0?r:0,plus:r>0?r:0},o=n.get(c.day);c.minus+=o?o.minus:0,c.plus+=o?o.plus:0,n.set(c.day,c)}));var o=[];return n.forEach((function(e){o.push(Object(v.a)({},e,{minus:-1*e.minus}))})),{statementGroupedByDay:o}}();return r.createElement("div",{className:e.paper},r.createElement(Ae,{chartData:t.statementGroupedByDay}))},Ye=n(37),Fe=n.n(Ye),Ue=n(78),He=n(267),Le=n(329),Ge=n(62),ze=n.n(Ge),Je=n(140),qe=n.n(Je),Ve=n(112),Xe=n.n(Ve),$e=n(110),Ke=n.n($e),Qe=n(84),Ze=n.n(Qe),_e=n(141),et=n.n(_e),tt=n(111),nt=n.n(tt),at=n(142),rt=n.n(at),ct=n(489),ot=n(490),lt=function(e){var t=e.color,n=e.progress,a={height:"100%",width:"".concat(n,"%"),backgroundColor:t,borderRadius:"inherit"};return r.createElement("div",{style:{height:16,backgroundColor:"#e0e0de"}},r.createElement("div",{style:a}))},it=Object(q.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},titleContainer:{marginBottom:16},card:{display:"flex"},cardDetails:{flex:1},tableWrapper:{marginTop:24}}})),st=[{title:"category",field:"name",editable:"never"},{title:"prognosis",field:"prognosis"},{title:"actual",field:"actual"},{title:"difference",field:"difference",editable:"never"}],ut={Check:r.forwardRef((function(e,t){return r.createElement(Ke.a,Object.assign({},e,{ref:t}))})),Clear:r.forwardRef((function(e,t){return r.createElement(Ze.a,Object.assign({},e,{ref:t}))})),Edit:r.forwardRef((function(e,t){return r.createElement(nt.a,Object.assign({},e,{ref:t}))})),SortArrow:r.forwardRef((function(e,t){return r.createElement(Xe.a,Object.assign({},e,{ref:t}))}))},mt=function(e,t,n,a){return r.createElement(De.a,{item:!0,xs:12,md:6},r.createElement(G.a,{component:"h2",variant:"h5"},e),r.createElement(ct.a,{className:n.card},r.createElement("div",{className:n.cardDetails},r.createElement(ot.a,null,r.createElement(De.a,{container:!0},r.createElement(De.a,{item:!0,xs:3,md:3},r.createElement(G.a,{component:"div",variant:"body1"},"Prognosis")),r.createElement(De.a,{item:!0,xs:3,md:3},r.createElement(G.a,{component:"div",variant:"body1"},t.prognosis)),r.createElement(De.a,{item:!0,xs:6,md:6},r.createElement(lt,{color:a,progress:0}))),r.createElement(De.a,{container:!0},r.createElement(De.a,{item:!0,xs:3,md:3},r.createElement(G.a,{component:"div",variant:"body1"},"Actual")),r.createElement(De.a,{item:!0,xs:3,md:3},r.createElement(G.a,{component:"div",variant:"body1"},t.actual)),r.createElement(De.a,{item:!0,xs:6,md:6},r.createElement(lt,{color:a,progress:59})))))))},dt=function(e,t,n){return r.createElement(De.a,{item:!0,xs:12,md:6},r.createElement(ze.a,{title:t,columns:st,data:e,editable:{onRowUpdate:n},icons:ut,options:{paging:!1,search:!1},localization:{header:{actions:""},body:{editRow:{deleteText:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0446\u044e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e?"},deleteTooltip:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"}}}))},pt=function(){var e=it(),t=Object(u.i)(),n=function(e,t){var n=e?parseInt(e):NaN,a=t?parseInt(t):NaN,r={month:a,income:[],expenses:[]},c=Object(d.d)((function(e){return e.planning})).plans[n];c&&(r=c.months[a]);var o=r,l=o.income,i=o.expenses;return{income:{balance:{prognosis:l.reduce((function(e,t){return e+t.prognosis}),0),actual:l.reduce((function(e,t){return e+t.actual}),0)},categories:l},expenses:{balance:{prognosis:i.reduce((function(e,t){return e+t.prognosis}),0),actual:i.reduce((function(e,t){return e+t.actual}),0)},categories:i}}}(t.year,t.month),a=r.useCallback((function(e){return function(){var e=Object(Ue.a)(Fe.a.mark((function e(t,n){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",Promise.resolve());case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),[]);return r.createElement("div",{className:e.paper},r.createElement(r.Fragment,null,t.month&&t.year&&r.createElement("div",{className:e.titleContainer},r.createElement(G.a,{component:"h1",variant:"h4"},"".concat(xe(t.month)," ").concat(t.year))),r.createElement(De.a,{container:!0,spacing:4},mt("Expenses",n.expenses.balance,e,"#9E3D3D"),mt("Income",n.income.balance,e,"#539E3D")),r.createElement(De.a,{container:!0,spacing:4,className:e.tableWrapper},dt(n.expenses.categories,"Expenses",a("expenses")),dt(n.income.categories,"Income",a("income")))))},ft=n(225),gt=n.n(ft),bt=function(e){var t=Object(d.c)(),n=e?parseInt(e):NaN,a=Object(d.d)((function(e){return e.planning})).plans[n],c=r.useCallback((function(e,n){t(function(e,t){return{type:C.CreateMonth,payload:{year:e,month:t}}}(e,n))}),[t]),o=r.useCallback((function(e,n){t(function(e,t){return{type:C.RemoveMonth,payload:{year:e,month:t}}}(e,n))}),[t]);return a?{year:n,months:a.months,empty:gt()(a.months),invalid:!1,handleCreateMonth:c,handleRemoveMonth:o}:{empty:!0,invalid:!0,months:{},handleCreateMonth:c,handleRemoveMonth:o}},ht=Object(q.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},selectMonth:{width:"100%"},monthCell:{height:"100%",width:"100%",borderBottom:"1px solid rgba(224, 224, 224, 1)"},buttonCell:{paddingRight:16,paddingLeft:16,borderBottom:"1px solid rgba(224, 224, 224, 1)"}}})),Et=[{title:"month",field:"month"},{title:"balance",field:"balance"}],vt={Add:r.forwardRef((function(e,t){return r.createElement(qe.a,Object.assign({},e,{ref:t}))})),Check:r.forwardRef((function(e,t){return r.createElement(Ke.a,Object.assign({},e,{ref:t}))})),Clear:r.forwardRef((function(e,t){return r.createElement(Ze.a,Object.assign({},e,{ref:t}))})),Delete:r.forwardRef((function(e,t){return r.createElement(et.a,Object.assign({},e,{ref:t}))})),Edit:r.forwardRef((function(e,t){return r.createElement(nt.a,Object.assign({},e,{ref:t}))})),ResetSearch:r.forwardRef((function(e,t){return r.createElement(Ze.a,Object.assign({},e,{ref:t}))})),Search:r.forwardRef((function(e,t){return r.createElement(rt.a,Object.assign({},e,{ref:t}))})),SortArrow:r.forwardRef((function(e,t){return r.createElement(Xe.a,Object.assign({},e,{ref:t}))}))},yt=function(e,t){return function(n){return"month"!==n.columnDef.field?r.createElement(Ge.MTableEditField,n):r.createElement(He.a,{className:e.selectMonth,labelId:"select-month",id:"select-month",value:n.value,displayEmpty:!0,onChange:function(e){return n.onChange(e.target.value)}},r.createElement(Le.a,{disabled:!0},"Select month"),new Array(12).fill(0).map((function(e,n){var a=!!t&&!!t[n];return r.createElement(Le.a,{key:"select-month-".concat(n),value:n,disabled:a},xe("".concat(n)))})))}},Ot=function(e,t){return function(n){return"month"===n.columnDef.field?r.createElement("td",{className:e.monthCell},xe(n.value)):n.columnDef.tableData.columnOrder===Et.length-1?r.createElement(r.Fragment,null,r.createElement(Ge.MTableCell,n),r.createElement("td",{className:e.buttonCell},r.createElement(Y.a,{type:"button",variant:"contained",color:"primary",onClick:t(n.rowData.month)},"Open"))):r.createElement(Ge.MTableCell,n)}},jt=function(){var e=ht(),t=Object(u.g)(),n=Object(u.i)(),a=bt(n.year),c=r.useCallback((function(e){return function(){t.push("/planning/year-".concat(n.year,"/month-").concat(e))}}),[t,n.year]),o=r.useCallback(function(){var e=Object(Ue.a)(Fe.a.mark((function e(t){var r,c;return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.year?parseInt(n.year):NaN,c=t.month,a.handleCreateMonth(r,c),e.abrupt("return",Promise.resolve());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,n.year]),l=r.useCallback(function(){var e=Object(Ue.a)(Fe.a.mark((function e(t){var r,c;return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.year?parseInt(n.year):NaN,c=t.month,a.handleRemoveMonth(r,c),e.abrupt("return",Promise.resolve());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,n.year]);return r.createElement("div",{className:e.paper},r.createElement(De.a,{container:!0},a.invalid&&r.createElement(G.a,{variant:"body1",component:"div"},"Invalid year"),a.empty&&r.createElement("div",null,r.createElement(G.a,{variant:"body1",component:"div"},"You don't have planning months")),!a.invalid&&r.createElement(De.a,{item:!0,xs:12,md:12},r.createElement(ze.a,{title:"Planning ".concat(n.year," year"),columns:Et,data:Object.values(a.months),icons:vt,editable:{onRowAdd:o,onRowDelete:l},options:{paging:!1,search:!1},components:{EditField:yt(e,a.months),Cell:Ot(e,c),Header:function(){return null}}}))))},wt=function(){var e=Object(d.c)(),t=Object(d.d)((function(e){return e.planning})),n=r.useCallback((function(t){e(function(e){return{type:C.CreateYear,payload:e}}(t))}),[e]),a=r.useCallback((function(t){e(function(e){return{type:C.RemoveYear,payload:e}}(t))}),[e]);return{plans:t.plans,empty:gt()(t.plans),handleCreateYear:n,handleRemoveYear:a}},Ct=Object(q.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},selectYear:{width:"100%"},yearCell:{height:"100%",width:"100%",borderBottom:"1px solid rgba(224, 224, 224, 1)"},buttonCell:{paddingRight:16,paddingLeft:16,borderBottom:"1px solid rgba(224, 224, 224, 1)"}}})),xt=[{title:"year",field:"year"},{title:"balance",field:"balance"}],kt=function(e,t){return function(n){return"year"!==n.columnDef.field?r.createElement(Ge.MTableEditField,n):r.createElement(He.a,{className:e.selectYear,labelId:"select-month",id:"select-month",value:n.value,displayEmpty:!0,onChange:function(e){return n.onChange(e.target.value)}},r.createElement(Le.a,{disabled:!0},"Select year"),new Array(11).fill(0).map((function(e,n){var a=n+2020,c=!!t&&!!t[a];return r.createElement(Le.a,{key:"select-year-".concat(a),value:a,disabled:c},a)})))}},Rt=function(e,t){return function(n){return"year"===n.columnDef.field?r.createElement("td",{className:e.yearCell},n.value):n.columnDef.tableData.columnOrder===xt.length-1?r.createElement(r.Fragment,null,r.createElement(Ge.MTableCell,n),r.createElement("td",{className:e.buttonCell},r.createElement(Y.a,{type:"button",variant:"contained",color:"primary",onClick:t(n.rowData.year)},"Open"))):r.createElement(Ge.MTableCell,n)}},Nt={Add:r.forwardRef((function(e,t){return r.createElement(qe.a,Object.assign({},e,{ref:t}))})),Check:r.forwardRef((function(e,t){return r.createElement(Ke.a,Object.assign({},e,{ref:t}))})),Clear:r.forwardRef((function(e,t){return r.createElement(Ze.a,Object.assign({},e,{ref:t}))})),Delete:r.forwardRef((function(e,t){return r.createElement(et.a,Object.assign({},e,{ref:t}))})),Edit:r.forwardRef((function(e,t){return r.createElement(nt.a,Object.assign({},e,{ref:t}))})),ResetSearch:r.forwardRef((function(e,t){return r.createElement(Ze.a,Object.assign({},e,{ref:t}))})),Search:r.forwardRef((function(e,t){return r.createElement(rt.a,Object.assign({},e,{ref:t}))})),SortArrow:r.forwardRef((function(e,t){return r.createElement(Xe.a,Object.assign({},e,{ref:t}))}))},Dt=function(){var e=Ct(),t=Object(u.g)(),n=wt(),a=r.useCallback((function(e){return function(){t.push("/planning/year-".concat(e))}}),[t]),c=r.useCallback(function(){var e=Object(Ue.a)(Fe.a.mark((function e(t){var a;return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.year,n.handleCreateYear(a),e.abrupt("return",Promise.resolve());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),o=r.useCallback(function(){var e=Object(Ue.a)(Fe.a.mark((function e(t){var a;return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.year,n.handleRemoveYear(a),e.abrupt("return",Promise.resolve());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]);return r.createElement(r.Fragment,null,r.createElement(u.b,{exact:!0,path:"/planning"},r.createElement("div",{className:e.paper},r.createElement(De.a,{container:!0},n.empty&&r.createElement("div",null,r.createElement(G.a,{variant:"body1",component:"div"},"You don't have planning years")),r.createElement(De.a,{item:!0,xs:12,md:12},r.createElement(ze.a,{title:"Planning years",columns:xt,data:Object.values(n.plans),icons:Nt,editable:{onRowAdd:c,onRowDelete:o},options:{paging:!1,search:!1},components:{EditField:kt(e,n.plans),Cell:Rt(e,a),Header:function(){return null}}}))))),r.createElement(u.b,{exact:!0,path:"/planning/year-:year"},r.createElement(jt,null)),r.createElement(u.b,{exact:!0,path:"/planning/year-:year/month-:month"},r.createElement(pt,null)))},St=function(){var e=Object(d.c)(),t=Object(d.d)((function(e){return e.categories}));return{income:t.income,expenses:t.expenses,onAddCategory:function(t,n){if(n){var a={id:"f".concat((+new Date).toString(16)),type:t,name:n};e(function(e){return{type:R.AddCategory,payload:e}}(a))}},onUpdateCategory:function(t,n,a){n&&a&&e(function(e){return{type:R.UpdateCategory,payload:e}}({id:n,type:t,name:a}))},onDeleteCategory:function(t,n){n&&t&&e(function(e,t){return{type:R.DeleteCategory,payload:{type:e,id:t}}}(t,n))}}},Tt=Object(q.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},tableWrapper:{marginTop:24}}})),It=[{title:"category",field:"name"}],Mt={Add:r.forwardRef((function(e,t){return r.createElement(qe.a,Object.assign({},e,{ref:t}))})),Check:r.forwardRef((function(e,t){return r.createElement(Ke.a,Object.assign({},e,{ref:t}))})),Clear:r.forwardRef((function(e,t){return r.createElement(Ze.a,Object.assign({},e,{ref:t}))})),Delete:r.forwardRef((function(e,t){return r.createElement(et.a,Object.assign({},e,{ref:t}))})),Edit:r.forwardRef((function(e,t){return r.createElement(nt.a,Object.assign({},e,{ref:t}))})),ResetSearch:r.forwardRef((function(e,t){return r.createElement(Ze.a,Object.assign({},e,{ref:t}))})),Search:r.forwardRef((function(e,t){return r.createElement(rt.a,Object.assign({},e,{ref:t}))})),SortArrow:r.forwardRef((function(e,t){return r.createElement(Xe.a,Object.assign({},e,{ref:t}))}))},Bt=function(e,t,n,a,c){return r.createElement(De.a,{item:!0,xs:12,md:6},r.createElement(ze.a,{title:t,columns:It,data:Object.values(e),editable:{onRowAdd:n,onRowUpdate:a,onRowDelete:c},icons:Mt,options:{paging:!1,search:!1}}))},At=function(){var e=Tt(),t=St(),n=r.useCallback((function(e){return function(){var n=Object(Ue.a)(Fe.a.mark((function n(a){return Fe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.onAddCategory(e,a.name),n.abrupt("return",Promise.resolve());case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}),[t]),a=r.useCallback((function(e){return function(){var n=Object(Ue.a)(Fe.a.mark((function n(a,r){return Fe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.onUpdateCategory(e,a.id,a.name),n.abrupt("return",Promise.resolve());case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}),[t]),c=r.useCallback((function(e){return function(){var n=Object(Ue.a)(Fe.a.mark((function n(a){var r;return Fe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.id,t.onDeleteCategory(e,r),n.abrupt("return",Promise.resolve());case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}),[t]);return r.createElement("div",{className:e.paper},r.createElement(De.a,{container:!0,spacing:4,className:e.tableWrapper},Bt(t.expenses,"Expenses",n("expenses"),a("expenses"),c("expenses")),Bt(t.income,"Income",n("income"),a("income"),c("income"))))},Pt=function(){var e=Object(d.c)();return{userName:Object(d.d)((function(e){return e.user})).name,onRemoveToken:function(){e({type:a.RemoveToken})}}},Wt=Object(q.a)((function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}})),Yt=function(){var e=Wt(),t=Pt(),n=r.useState(!0),a=Object(P.a)(n,2),c=a[0],o=a[1],l=r.useCallback((function(){console.log(c,!c),o(!c)}),[c,o]),i=r.useCallback((function(){t.onRemoveToken()}),[t]);return r.createElement("div",{className:e.root},r.createElement(F.a,null),r.createElement(ye,{drawerOpen:c,onDrawerToggleClick:l,onLogout:i}),r.createElement(de,{drawerOpen:c,userName:t.userName,onDrawerToggleClick:l}),r.createElement("main",{className:e.content},r.createElement("div",{className:e.appBarSpacer}),r.createElement(Ne,null),r.createElement(z.a,{maxWidth:"lg",className:e.container},r.createElement(u.b,{path:"/dashboard"},r.createElement(We,null)),r.createElement(u.b,{path:"/planning"},r.createElement(Dt,null)),r.createElement(u.b,{path:"/categories"},r.createElement(At,null)))))},Ft=n(227),Ut=function(){return!!Object(d.d)((function(e){return e.auth})).token},Ht=function(e){var t=e.children,n=Object(Ft.a)(e,["children"]),a=Ut();return r.createElement(u.b,Object.assign({},n,{render:function(e){var n=e.location;return a?t:r.createElement(u.a,{to:{pathname:"/login",state:{from:n}}})}}))},Lt=function(e){var t=e.children,n=Object(Ft.a)(e,["children"]),a=Ut();return r.createElement(u.b,Object.assign({},n,{render:function(e){var n=e.location;return a?r.createElement(u.a,{to:{pathname:"/",state:{from:n}}}):t}}))},Gt=Object(i.a)({palette:{primary:{main:"#43a047"},secondary:{main:"#388e3c"}}}),zt=function(){return r.createElement(u.d,null,r.createElement(Lt,{path:"/login"},r.createElement(X,null)),r.createElement(Ht,{path:"/"},r.createElement(Yt,null)))},Jt=function(){return r.createElement(d.a,{store:B},r.createElement(p.a,{persistor:A},r.createElement(s.a,{theme:Gt},r.createElement(m.a,{basename:"/monoplan-poc"},r.createElement(zt,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Jt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[384,1,2]]]);
//# sourceMappingURL=main.644aacf7.chunk.js.map