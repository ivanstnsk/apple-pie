(this["webpackJsonpapple-pie"]=this["webpackJsonpapple-pie"]||[]).push([[0],{384:function(e,t,n){e.exports=n(455)},389:function(e,t,n){},455:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(17),i=n.n(o),l=(n(389),n(124)),u=n(484),s=n(33),m=n(79),p=n(25),d=n(355),f=n(46),g=n(137),b=n(356),h=n(228),v=n.n(h),E=n(39);!function(e){e.SetToken="Auth/SetToken",e.RemoveToken="Auth/RemoveToken"}(a||(a={}));var y,x={token:""};!function(e){e.SetName="User/SetName",e.SetMonth="User/SetMonth"}(y||(y={}));var w,O=function(e){return{type:y.SetMonth,payload:e}},j={name:"",month:0};!function(e){e.SetStatement="Statement/SetStatement"}(w||(w={}));var C,k=function(e){return{type:w.SetStatement,payload:e}},S={items:[]},N=n(370);!function(e){e.CreatePlanningYear="Planning/CreatePlanningYear"}(C||(C={}));var D,T=function(e,t){for(var n={},a=0;a<12;a+=1)n[a]={income:t.income.map((function(e){return{id:e.id,name:e.name,prognosis:100,actual:50,difference:50}})),expenses:t.expenses.map((function(e){return{id:e.id,name:e.name,prognosis:100,actual:50,difference:50}}))};return{year:e,months:n}},R={plans:[]},I=n(104);!function(e){e.AddCategory="Categories/AddCategory",e.UpdateCategory="Categories/UpdateCategory",e.DeleteCategory="Categories/DeleteCategory"}(D||(D={}));var B={income:[],expenses:[]},P={key:"auth",storage:v.a},W={key:"planning",storage:v.a},A={key:"categories",storage:v.a},U=Object(f.combineReducers)({auth:Object(g.a)(P,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case a.SetToken:return Object(E.a)({},e,{token:r});case a.RemoveToken:return Object(E.a)({},e,{token:null});default:return e}})),user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case y.SetName:return Object(E.a)({},e,{name:a});case y.SetMonth:return Object(E.a)({},e,{month:a});default:return e}},statement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case w.SetStatement:return Object(E.a)({},e,{items:a});default:return e}},planning:Object(g.a)(W,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case C.CreatePlanningYear:var r=a,c=r.year,o=r.categoriesState,i=e.plans.filter((function(e){return e.year===c}));return i.length>0?e:Object(E.a)({},e,{plans:[].concat(Object(N.a)(e.plans),[T(c,o)])});default:return e}})),categories:Object(g.a)(A,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case D.AddCategory:var r=a,c=e[r.type].filter((function(e){return e.id!==r.id})),o=e[r.type].filter((function(e){return e.name===r.name}));return o.length>0?e:(c.push(r),Object(E.a)({},e,Object(I.a)({},r.type,c)));case D.UpdateCategory:var i=a,l=e[i.type].findIndex((function(e){return e.id===i.id}));if(l<0)return e;var u=e[i.type].filter((function(e){return e.name===i.name}));if(u.length>0)return e;var s=Array.from(e[i.type]);return s[l]=Object(E.a)({},i),Object(E.a)({},e,Object(I.a)({},i.type,s));case D.DeleteCategory:var m=a,p=m.id,d=m.type,f=e[d].findIndex((function(e){return e.id===p}));if(f<0)return e;var g=Array.from(e[d]);return g.splice(f,1),Object(E.a)({},e,Object(I.a)({},d,g));default:return e}}))}),F=Object(f.createStore)(U,{},Object(b.composeWithDevTools)()),H=Object(g.b)(F),M=n(76),Y=n(492),G=n(320),L=n(474),z=n(319),J=n(357),X=n.n(J),q=n(83),V=n(473),$=function(){var e=Object(p.c)();return{onSetToken:function(t){t&&t.length>0&&e(function(e){return{type:a.SetToken,payload:e}}(t))}}},K=n(318),Q=Object(K.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Z=function(){var e=Q(),t=$(),n=r.useState(""),a=Object(M.a)(n,2),c=a[0],o=a[1],i=r.useCallback((function(e){o(e.target.value)}),[o]),l=r.useCallback((function(e){e.preventDefault(),t.onSetToken(c)}),[t,c]);return r.createElement(V.a,{component:"main",maxWidth:"xs"},r.createElement(L.a,null),r.createElement("div",{className:e.paper},r.createElement(Y.a,{className:e.avatar},r.createElement(X.a,null)),r.createElement(q.a,{component:"h1",variant:"h5"},"Mono \u0442\u043e\u043a\u0435\u043d"),r.createElement("form",{className:e.form,noValidate:!0},r.createElement(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"token",label:"Token",type:"password",id:"token",autoComplete:"none",value:c,onChange:i}),r.createElement(G.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:l},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0432\u0430\u0442\u0438\u0441\u044f"))))},_=n(2),ee=n(77),te=n(262),ne=n(362),ae=n.n(ne),re=n(477),ce=n(374),oe=n(375),ie=n(476),le=n(261),ue=n(361),se=n.n(ue),me=n(359),pe=n.n(me),de=n(360),fe=n.n(de),ge=Object(K.a)((function(e){return{drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(I.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),toolbarIcon:Object(E.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},userContainer:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:15,paddingBottom:15},userName:{display:"visible"},userNameHidden:{display:"none"},dateContainer:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:15,paddingBottom:15},date:{display:"visible"},dateHidden:{display:"none"}}})),be=function(e){var t=e.drawerOpen,n=e.userName,a=e.onDrawerToggleClick,c=ge(),o=s.g(),i={paper:Object(_.a)(c.drawerPaper,!t&&c.drawerPaperClose)},l=Object(_.a)(c.userName,!t&&c.userNameHidden),u=Object(_.a)(c.date,!t&&c.dateHidden),m=r.useCallback((function(e){return function(){o.push(e)}}),[o]);return r.createElement(ee.a,{variant:"permanent",classes:i,open:t},r.createElement("div",{className:c.toolbarIcon},r.createElement(te.a,{onClick:a},r.createElement(ae.a,null))),r.createElement(re.a,null),r.createElement("div",{className:c.userContainer},r.createElement(Y.a,null,n.split(" ").reduce((function(e,t){return e+t.substring(0,1).toUpperCase()}),"")),r.createElement("div",{className:l},r.createElement(q.a,{variant:"h6"},n))),r.createElement(re.a,null),r.createElement("div",{className:c.dateContainer},r.createElement("div",{className:u},r.createElement(q.a,{variant:"body2"},"\u041b\u0438\u043f\u0435\u043d\u044c 2020"))),r.createElement(re.a,null),r.createElement(ce.a,null,function(e){return r.createElement(r.Fragment,null,r.createElement(oe.a,{button:!0,onClick:e("/planning")},r.createElement(ie.a,null,r.createElement(pe.a,null)),r.createElement(le.a,{primary:"\u041f\u043b\u0430\u043d\u0443\u0432\u0430\u043d\u043d\u044f"})),r.createElement(oe.a,{button:!0,onClick:e("/categories")},r.createElement(ie.a,null,r.createElement(fe.a,null)),r.createElement(le.a,{primary:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457 \u0434\u043e\u0445\u043e\u0434\u0456\u0432 \u0456 \u0432\u0438\u0442\u0440\u0430\u0442"})),r.createElement(oe.a,{button:!0,onClick:e("/dashboard")},r.createElement(ie.a,null,r.createElement(se.a,null)),r.createElement(le.a,{primary:"\u0414\u0430\u0448\u0431\u043e\u0440\u0434"})))}(m)))},he=n(478),ve=n(321),Ee=n(363),ye=n.n(Ee),xe=n(364),we=n.n(xe),Oe=Object(K.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},toolbar:{paddingRight:24}}})),je=function(e){var t=e.drawerOpen,n=e.onDrawerToggleClick,a=e.onLogout,c=Oe(),o=function(e){switch(e){case"/planning":return"\u041f\u043b\u0430\u043d\u0443\u0432\u0430\u043d\u043d\u044f";case"/dashboard":return"\u0414\u0430\u0448\u0431\u043e\u0440\u0434";case"/categories":return"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457 \u0434\u043e\u0445\u043e\u0434\u0456\u0432 \u0456 \u0432\u0438\u0442\u0440\u0430\u0442";default:return""}}(Object(s.h)().pathname),i=Object(_.a)(c.appBar,t&&c.appBarShift),l=Object(_.a)(c.menuButton,t&&c.menuButtonHidden);return r.createElement(he.a,{position:"absolute",className:i},r.createElement(ve.a,{className:c.toolbar},r.createElement(te.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:n,className:l},r.createElement(ye.a,null)),r.createElement(q.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:c.title},o),r.createElement(te.a,{color:"inherit",onClick:a},r.createElement(we.a,null))))},Ce=(n(365),n(164),n(105)),ke=(Object(K.a)((function(e){return{container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},modal:{maxWidth:500,width:"100%",height:500,position:"absolute",left:"50%",top:"50%",transform:"translate(-150px, -250px)",outline:"none"},modalInner:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",flexWrap:"wrap",height:"100%"},button:{marginLeft:10,marginRight:10}}})),n(491)),Se=n(479),Ne={0:"\u0421\u0456\u0447\u0435\u043d\u044c",1:"\u041b\u044e\u0442\u0438\u0439",2:"\u0411\u0435\u0440\u0435\u0437\u0435\u043d\u044c",3:"\u041a\u0432\u0456\u0442\u0435\u043d\u044c",4:"\u0422\u0440\u0430\u0432\u0435\u043d\u044c",5:"\u0427\u0435\u0440\u0432\u0435\u043d\u044c",6:"\u041b\u0438\u043f\u0435\u043d\u044c",7:"\u0421\u0435\u0440\u043f\u0435\u043d\u044c",8:"\u0412\u0435\u0440\u0435\u0441\u0435\u043d\u044c",9:"\u0416\u043e\u0432\u0442\u0435\u043d\u044c",10:"\u041b\u0438\u0441\u0442\u043e\u043f\u0430\u0434",11:"\u0413\u0440\u0443\u0434\u0435\u043d\u044c"},De=function(e){return Ne[e]||"Invalid month"},Te=Object(K.a)((function(e){return{wrapper:{display:"flex",paddingLeft:24,paddingRight:24,marginTop:10}}})),Re=function(e,t){return e.map((function(n,a){var c=e.slice(0,a+1).reduce((function(e,t,n){return e+"".concat(t).concat(n<a?"/":"")}),"");return function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=t;if(t.startsWith("year-"))c=t.substring(5,t.length);else if(t.startsWith("month-")){var o=t.substring(6,t.length);c=De(o)}return a?r.createElement(q.a,{color:"textPrimary"},c):r.createElement(Se.a,{key:e,color:"inherit",href:e,onClick:n},c)}(c,n,t(c),a===e.length-1)}))},Ie=function(){var e=Te(),t=Object(s.h)(),n=Object(s.g)(),a=t.pathname.split("/"),c=r.useCallback((function(e){return function(){n.push(e)}}),[n]);return r.createElement("div",{className:e.wrapper},r.createElement(ke.a,{"aria-label":"breadcrumb"},Re(a,c)))},Be=n(480),Pe=n(490),We=n(482),Ae=n(99),Ue=n(23),Fe=Object(K.a)((function(e){return{paper:{width:"100%"}}})),He=function(e){var t=e.chartData,n=Fe(),a=r.useState("income"),c=Object(M.a)(a,2),o=c[0],i=c[1],l=r.useCallback((function(e,t){i(t)}),[i]);return r.createElement(Be.a,{container:!0,spacing:3},r.createElement(Be.a,{item:!0,xs:12,md:8,lg:9},r.createElement(Ce.a,{className:n.paper},r.createElement(Pe.a,{value:o,onChange:l,"aria-label":"simple tabs example"},r.createElement(We.a,{label:"\u0414\u043e\u0445\u043e\u0434\u0438",value:"income"}),r.createElement(We.a,{label:"\u0412\u0438\u0442\u0440\u0430\u0442\u0438",value:"expenses"})),"income"===o&&r.createElement(Ae.c,{data:t},r.createElement(Ae.a,null),r.createElement(Ae.d,null),r.createElement(Ae.b,{name:"plus",valueField:"plus",argumentField:"day",color:"#00b300"}),r.createElement(Ue.e,null),r.createElement(Ue.f,null)),"expenses"===o&&r.createElement(Ae.c,{data:t},r.createElement(Ae.a,null),r.createElement(Ae.d,null),r.createElement(Ae.b,{name:"minus",valueField:"minus",argumentField:"day",color:"#ff4d4d"}),r.createElement(Ue.e,null),r.createElement(Ue.f,null)))),r.createElement(Be.a,{item:!0,xs:12,md:4,lg:3},r.createElement(Ce.a,null,"TODO: statistic for day")))},Me=Object(K.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"}}})),Ye=function(){var e=Me(),t=function(){for(var e=Object(p.d)((function(e){return e.statement})),t=Object(p.d)((function(e){return e.user})),n=new Map,a=new Date(2020,t.month,0).getDate(),r=0;r<a;r+=1){var c="".concat(r);n.set(c,{day:c,minus:0,plus:0})}e.items.forEach((function(e){var t=e.time,a=e.amount,r=(e.balance,a/100),c={day:"".concat(new Date(1e3*t).getDate()),minus:r<0?r:0,plus:r>0?r:0},o=n.get(c.day);c.minus+=o?o.minus:0,c.plus+=o?o.plus:0,n.set(c.day,c)}));var o=[];return n.forEach((function(e){o.push(Object(E.a)({},e,{minus:-1*e.minus}))})),{statementGroupedByDay:o}}();return r.createElement("div",{className:e.paper},r.createElement(He,{chartData:t.statementGroupedByDay}))},Ge=n(35),Le=n.n(Ge),ze=n(65),Je=n(488),Xe=n(489),qe=n(157),Ve=n.n(qe),$e=n(222),Ke=n.n($e),Qe=n(220),Ze=n.n(Qe),_e=n(163),et=n.n(_e),tt=n(221),nt=n.n(tt),at=function(e){var t=e.color,n=e.progress,a={height:"100%",width:"".concat(n,"%"),backgroundColor:t,borderRadius:"inherit"};return r.createElement("div",{style:{height:16,backgroundColor:"#e0e0de"}},r.createElement("div",{style:a}))},rt=Object(K.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},titleContainer:{marginBottom:16},card:{display:"flex"},cardDetails:{flex:1},tableWrapper:{marginTop:24}}})),ct=[{title:"category",field:"name",editable:"never"},{title:"prognosis",field:"prognosis"},{title:"actual",field:"actual"},{title:"difference",field:"difference",editable:"never"}],ot={Check:r.forwardRef((function(e,t){return r.createElement(Ze.a,Object.assign({},e,{ref:t}))})),Clear:r.forwardRef((function(e,t){return r.createElement(et.a,Object.assign({},e,{ref:t}))})),Edit:r.forwardRef((function(e,t){return r.createElement(nt.a,Object.assign({},e,{ref:t}))})),SortArrow:r.forwardRef((function(e,t){return r.createElement(Ke.a,Object.assign({},e,{ref:t}))}))},it=function(e,t,n,a){return r.createElement(Be.a,{item:!0,xs:12,md:6},r.createElement(q.a,{component:"h2",variant:"h5"},e),r.createElement(Je.a,{className:n.card},r.createElement("div",{className:n.cardDetails},r.createElement(Xe.a,null,r.createElement(Be.a,{container:!0},r.createElement(Be.a,{xs:3,md:3},r.createElement(q.a,{component:"div",variant:"body1"},"Prognosis")),r.createElement(Be.a,{xs:3,md:3},r.createElement(q.a,{component:"div",variant:"body1"},t.prognosis)),r.createElement(Be.a,{xs:6,md:6},r.createElement(at,{color:a,progress:0}))),r.createElement(Be.a,{container:!0},r.createElement(Be.a,{xs:3,md:3},r.createElement(q.a,{component:"div",variant:"body1"},"Actual")),r.createElement(Be.a,{xs:3,md:3},r.createElement(q.a,{component:"div",variant:"body1"},t.actual)),r.createElement(Be.a,{xs:6,md:6},r.createElement(at,{color:a,progress:59})))))))},lt=function(e,t,n){return r.createElement(Be.a,{item:!0,xs:12,md:6},r.createElement(Ve.a,{title:t,columns:ct,data:e,editable:{onRowUpdate:n},icons:ot,options:{paging:!1,search:!1},localization:{header:{actions:""},body:{editRow:{deleteText:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0446\u044e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e?"},deleteTooltip:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"}}}))},ut=function(){var e=rt(),t=Object(s.i)(),n=function(e,t){var n=e?parseInt(e):NaN,a=t||"invalid",r={income:[],expenses:[]},c=Object(p.d)((function(e){return e.planning})).plans.find((function(e){return e.year===n}));c&&(r=c.months[a]);var o=r,i=o.income,l=o.expenses;return{income:{balance:{prognosis:i.reduce((function(e,t){return e+t.prognosis}),0),actual:i.reduce((function(e,t){return e+t.actual}),0)},categories:i},expenses:{balance:{prognosis:l.reduce((function(e,t){return e+t.prognosis}),0),actual:l.reduce((function(e,t){return e+t.actual}),0)},categories:l}}}(t.year,t.month),a=r.useCallback((function(e){return function(){var e=Object(ze.a)(Le.a.mark((function e(t,n){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",Promise.resolve());case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),[]);return r.createElement("div",{className:e.paper},r.createElement(r.Fragment,null,t.month&&t.year&&r.createElement("div",{className:e.titleContainer},r.createElement(q.a,{component:"h1",variant:"h4"},"".concat(De(t.month)," ").concat(t.year))),r.createElement(Be.a,{container:!0,spacing:4},it("Expenses",n.expenses.balance,e,"#9E3D3D"),it("Income",n.income.balance,e,"#539E3D")),r.createElement(Be.a,{container:!0,spacing:4,className:e.tableWrapper},lt(n.expenses.categories,"Expenses",a("expenses")),lt(n.income.categories,"Income",a("income")))))},st=Object(K.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"}}})),mt=function(){var e=st(),t=Object(s.g)(),n=Object(s.i)(),a=function(e){var t=e?parseInt(e):NaN;return{plan:Object(p.d)((function(e){return e.planning})).plans.find((function(e){return e.year===t}))}}(n.year),c=r.useCallback((function(e){return function(){t.push("/planning/year-".concat(n.year,"/month-").concat(e))}}),[t,n.year]);return r.createElement("div",{className:e.paper},a.plan&&Object.keys(a.plan.months).map((function(e){return function(e,t){return r.createElement(G.a,{key:"month-".concat(e),type:"button",variant:"contained",color:"primary",onClick:t},De(e))}(e,c(e))})))},pt=function(){var e=Object(p.c)(),t=Object(p.d)((function(e){return e.planning})),n=Object(p.d)((function(e){return e.categories})),a=r.useCallback((function(t){e(function(e,t){return{type:C.CreatePlanningYear,payload:{year:e,categoriesState:t}}}(t,n))}),[e,n]);return{plans:t.plans,handleCreatePlanningYear:a}},dt=Object(K.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"}}})),ft=function(){var e=dt(),t=Object(s.g)(),n=pt(),a=r.useCallback((function(){n.handleCreatePlanningYear((new Date).getFullYear())}),[n]),c=r.useCallback((function(e){return function(){t.push("/planning/year-".concat(e))}}),[t]);return r.createElement(r.Fragment,null,r.createElement("div",{className:e.paper},0===n.plans.length&&r.createElement(r.Fragment,null,r.createElement("div",null,"You don't have any plans!"),r.createElement(G.a,{type:"button",variant:"contained",color:"primary",onClick:a},"Create")),n.plans.length>0&&r.createElement("div",null,n.plans.map((function(e){return function(e,t){var n=e.year;return r.createElement(G.a,{key:"year-".concat(n),type:"button",variant:"contained",color:"primary",onClick:t},n)}(e,c(e.year))})))),r.createElement(s.b,{exact:!0,path:"/planning/year-:year"},r.createElement(mt,null)),r.createElement(s.b,{exact:!0,path:"/planning/year-:year/month-:month"},r.createElement(ut,null)))},gt=n(367),bt=n.n(gt),ht=n(368),vt=n.n(ht),Et=n(369),yt=n.n(Et),xt=function(){var e=Object(p.c)(),t=Object(p.d)((function(e){return e.categories}));return{income:t.income,expenses:t.expenses,onAddCategory:function(t,n){if(n){var a={id:"f".concat((+new Date).toString(16)),type:t,name:n};e(function(e){return{type:D.AddCategory,payload:e}}(a))}},onUpdateCategory:function(t,n,a){n&&a&&e(function(e){return{type:D.UpdateCategory,payload:e}}({id:n,type:t,name:a}))},onDeleteCategory:function(t,n){n&&t&&e(function(e,t){return{type:D.DeleteCategory,payload:{type:e,id:t}}}(t,n))}}},wt=Object(K.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},tableWrapper:{marginTop:24}}})),Ot=[{title:"category",field:"name"}],jt={Add:r.forwardRef((function(e,t){return r.createElement(bt.a,Object.assign({},e,{ref:t}))})),Check:r.forwardRef((function(e,t){return r.createElement(Ze.a,Object.assign({},e,{ref:t}))})),Clear:r.forwardRef((function(e,t){return r.createElement(et.a,Object.assign({},e,{ref:t}))})),Delete:r.forwardRef((function(e,t){return r.createElement(vt.a,Object.assign({},e,{ref:t}))})),Edit:r.forwardRef((function(e,t){return r.createElement(nt.a,Object.assign({},e,{ref:t}))})),ResetSearch:r.forwardRef((function(e,t){return r.createElement(et.a,Object.assign({},e,{ref:t}))})),Search:r.forwardRef((function(e,t){return r.createElement(yt.a,Object.assign({},e,{ref:t}))})),SortArrow:r.forwardRef((function(e,t){return r.createElement(Ke.a,Object.assign({},e,{ref:t}))}))},Ct=function(e,t,n,a,c){return r.createElement(Be.a,{item:!0,xs:12,md:6},r.createElement(Ve.a,{title:t,columns:Ot,data:e,editable:{onRowAdd:n,onRowUpdate:a,onRowDelete:c},icons:jt,options:{paging:!1,search:!1},localization:{header:{actions:""},body:{editRow:{deleteText:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0446\u044e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e?"},deleteTooltip:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"}}}))},kt=function(){var e=wt(),t=xt(),n=r.useCallback((function(e){return function(){var n=Object(ze.a)(Le.a.mark((function n(a){return Le.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.onAddCategory(e,a.name),n.abrupt("return",Promise.resolve());case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}),[t]),a=r.useCallback((function(e){return function(){var n=Object(ze.a)(Le.a.mark((function n(a,r){return Le.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.onUpdateCategory(e,a.id,a.name),n.abrupt("return",Promise.resolve());case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}),[t]),c=r.useCallback((function(e){return function(){var n=Object(ze.a)(Le.a.mark((function n(a){var r;return Le.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.id,t.onDeleteCategory(e,r),n.abrupt("return",Promise.resolve());case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}),[t]);return r.createElement("div",{className:e.paper},r.createElement(Be.a,{container:!0,spacing:4,className:e.tableWrapper},Ct(t.expenses,"Expenses",n("expenses"),a("expenses"),c("expenses")),Ct(t.income,"Income",n("income"),a("income"),c("income"))))},St=function(e){return function(e,t){var n=localStorage.getItem("persist:auth"),a=new Headers,r="https://api.monobank.ua/".concat(t);if(n){var c=JSON.parse(n).token;c&&a.append("X-Token",c.substring(1,c.length-1))}return fetch(r,{method:e,headers:a})}("get",e)},Nt=function(){var e=Object(ze.a)(Le.a.mark((function e(){var t,n,a;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,St("personal/client-info");case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,a=n.name,e.abrupt("return",a);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),Dt=function(){var e=Object(ze.a)(Le.a.mark((function e(t){var n,a,r,c,o;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date("2020.".concat(t,".01")).getTime()/1e3,a=new Date("2020.".concat(t,".").concat(new Date(2020,t,0).getDate())).getTime()/1e3,e.prev=2,e.next=5,St("personal/statement/0/".concat(n,"/").concat(a));case 5:return r=e.sent,e.next=8,r.json();case 8:if(!((c=e.sent)&&c.length>0)){e.next=12;break}return o=c,e.abrupt("return",o);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0);case 17:return e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),Tt=function(){var e=Object(p.c)(),t=Object(p.d)((function(e){return e.user})),n=r.useCallback(Object(ze.a)(Le.a.mark((function t(){var n;return Le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Nt();case 2:(n=t.sent)&&e((a=n,{type:y.SetName,payload:a}));case 4:case"end":return t.stop()}var a}),t)}))),[e]),c=r.useCallback(function(){var t=Object(ze.a)(Le.a.mark((function t(n){var a;return Le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Dt(n);case 2:a=t.sent,e(k(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),o=r.useCallback((function(){var t=(new Date).getMonth();e(O(t))}),[e]);return r.useEffect((function(){n(),o()}),[n,o]),r.useEffect((function(){c(t.month)}),[c,t.month]),{userName:t.name,onRemoveToken:function(){e({type:a.RemoveToken})}}},Rt=Object(K.a)((function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}})),It=function(){var e=Rt(),t=Tt(),n=r.useState(!0),a=Object(M.a)(n,2),c=a[0],o=a[1],i=r.useCallback((function(){console.log(c,!c),o(!c)}),[c,o]),l=r.useCallback((function(){t.onRemoveToken()}),[t]);return r.createElement("div",{className:e.root},r.createElement(L.a,null),r.createElement(je,{drawerOpen:c,onDrawerToggleClick:i,onLogout:l}),r.createElement(be,{drawerOpen:c,userName:t.userName,onDrawerToggleClick:i}),r.createElement("main",{className:e.content},r.createElement("div",{className:e.appBarSpacer}),r.createElement(Ie,null),r.createElement(V.a,{maxWidth:"lg",className:e.container},r.createElement(s.b,{path:"/dashboard"},r.createElement(Ye,null)),r.createElement(s.b,{path:"/planning"},r.createElement(ft,null)),r.createElement(s.b,{path:"/categories"},r.createElement(kt,null)))))},Bt=n(224),Pt=function(){return!!Object(p.d)((function(e){return e.auth})).token},Wt=function(e){var t=e.children,n=Object(Bt.a)(e,["children"]),a=Pt();return r.createElement(s.b,Object.assign({},n,{render:function(e){var n=e.location;return a?t:r.createElement(s.a,{to:{pathname:"/login",state:{from:n}}})}}))},At=function(e){var t=e.children,n=Object(Bt.a)(e,["children"]),a=Pt();return r.createElement(s.b,Object.assign({},n,{render:function(e){var n=e.location;return a?r.createElement(s.a,{to:{pathname:"/",state:{from:n}}}):t}}))},Ut=Object(l.a)({palette:{primary:{main:"#43a047"},secondary:{main:"#388e3c"}}}),Ft=function(){return r.createElement(s.d,null,r.createElement(At,{path:"/login"},r.createElement(Z,null)),r.createElement(Wt,{path:"/"},r.createElement(It,null)))},Ht=function(){return r.createElement(p.a,{store:F},r.createElement(d.a,{persistor:H},r.createElement(u.a,{theme:Ut},r.createElement(m.a,{basename:"/monoplan-poc"},r.createElement(Ft,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Ht,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[384,1,2]]]);
//# sourceMappingURL=main.98d57382.chunk.js.map